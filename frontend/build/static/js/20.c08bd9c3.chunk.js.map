{"version":3,"sources":["pages/notFound.js","components/users/fetchOne.js","components/pages/admin/userControlPage.js","pages/admin/controlUser.js","components/layout/navbar/navbarSmall.js"],"names":["NotFound","location","useLocation","title","className","pathname","to","FetchUser","useState","user","setUser","params","useParams","useEffect","a","token","localStorage","getItem","body","JSON","stringify","id","trackPromise","fetch","process","method","then","response","json","data","catch","error","console","fetchUser","SectionTitle","styled","h2","ButtonGroup","div","SmallText","props","theme","darker_grey","UserControlPage","back","alert","updateStatus","updateAdmin","handleSubmit","onSubmit","register","errors","modalVisible","modalInvisible","showModal","deleteUser","name","grid","color","height","visible","text","style","width","minWidth","margin","status","admin","onClick","show","handleClose","actionButton","actionButtonText","actionButtonClassName","actionButtonOnClick","marginBottom","ControlUser","history","useHistory","state","from","setShowModal","setAlert","useForm","_","assign","change_status","success","log","setTimeout","push","MainLink","Link","NavbarSmall","center","src","Logo","alt"],"mappings":"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","file":"static/js/20.c08bd9c3.chunk.js","sourcesContent":["import React from \"react\"\nimport { Link, useLocation } from \"react-router-dom\"\n\nimport NavbarSmall from \"components/layout/navbar/navbarSmall\"\nimport DefaultPage from 'components/layout/defaultPage'\n\nfunction NotFound() {\n  let location = useLocation()\n  \n  return (\n    <>\n      <NavbarSmall />\n      <DefaultPage title=\"404 - Pagina niet gevonden\">\n        <p className=\"large\">De pagina {location.pathname} kon niet gevonden worden op deze server. Controleer op typfouten en probeer het opnieuw of <Link to=\"/\">ga terug naar de homepagina</Link>.</p>\n      </DefaultPage>\n    </>\n  )\n}\n\nexport default NotFound","import { useState, useEffect } from \"react\"\nimport { useParams } from \"react-router-dom\"\nimport { trackPromise } from \"react-promise-tracker\"\n\nfunction FetchUser() {\n\n  const [user, setUser] = useState(null)\n  const params = useParams()\n\n  useEffect(() => {\n    async function fetchUser() {\n      const token = localStorage.getItem('jwt-token')\n      const body = JSON.stringify({ token: token, id: params.id })\n\n      trackPromise (\n        fetch(`${process.env.REACT_APP_API_BASEURL}/user/fetch_one.php`, {\n          method: 'POST',\n          body: body\n        })\n          .then(async response => {\n            const data = await response.json()\n            if (data.id) {\n              setUser(data)\n            }\n          })\n          .catch((error) => console.error(error))\n      )\n    }\n\n    fetchUser()\n\n  }, [params])\n  \n  return user ? user : null\n\n}\n\nexport default FetchUser","import React from \"react\"\nimport styled from \"styled-components\"\nimport { Link } from \"react-router-dom\"\nimport { ArrowBackOutline } from \"react-ionicons\"\nimport NotFound from \"pages/notFound\"\nimport DefaultPage from \"components/layout/defaultPage\"\nimport NavbarLarge from \"components/layout/navbar/navbarLarge\"\nimport { GridColOneThird, GridColTwoThirds, GridColFull } from \"components/elements/containers\"\nimport UserForm from \"components/users/userForm\"\nimport Alert from \"components/elements/alert\"\nimport Modal from \"components/elements/modal\"\n\nconst UserControlPage = ({ user, back, alert, updateStatus, updateAdmin, handleSubmit, onSubmit, register, errors, modalVisible, modalInvisible, showModal, deleteUser }) => (\n  <>\n    {\n      user ? (\n        <>\n          {/* render navbar and default page wrapper */}\n          <NavbarLarge />\n          <DefaultPage title={`Beheer het account van ${user.name}`} grid>\n            {/* top section with back button and alert */}\n            <GridColFull>\n              <Link to={back ? back : '/admin'} className=\"button button-back\">\n                <ArrowBackOutline color={'#ffffff'} height=\"16px\" />\n                &nbsp;Ga terug\n              </Link>\n              <Alert \n                visible={alert.visible} \n                text={alert.alert}\n                style={{ width: '100%', minWidth: '100%', margin: '30px 0' }}\n              />\n            </GridColFull>\n\n            {/* left grid column with account permissions */}\n            <GridColOneThird>\n              <SectionTitle>Beheer gebruikerstoegang</SectionTitle>\n              <p className=\"large\">\n                Deze gebruiker is <u>{(user.status == 1) ? 'goedgekeurd' : 'nog niet goedgekeurd'}</u> en <u>{(user.admin == 1) ? 'een' : 'geen'} administratorgebruiker</u>. Pas dit hier aan.\n              </p>\n\n              <ButtonGroup>\n                <Link to=\"#\" onClick={() => updateStatus()}>{(user.status == 1) ? 'Keur gebruiker niet meer goed' : 'Keur gebruiker goed'}</Link>\n                <Link to=\"#\" onClick={() => updateAdmin()}>{(user.admin == 1) ? 'Maak niet meer administrator' : 'Maak administrator'}</Link>\n              </ButtonGroup>\n\n              {/* important info for account permissions */}\n              <SmallText>\n                <h3>Belangrijke informatie over gebruikersstatus en administratorgebruikers</h3>\n                <p>\n                  Een gebruiker die niet is goedgekeurd, heeft geen toegang tot het hele systeem. Deze gebruiker zal aleen een pagina zien waarop staat dat er nog geen goedkeuring is verleend. Administratorgebruikers hebben toegang tot alle functies van het systeem en kunnen boeken, foutrapportages en gebruikers beheren.\n                </p>\n              </SmallText>\n            </GridColOneThird>\n\n            {/* right grid col with form */}\n            <GridColTwoThirds>\n              <SectionTitle>Beheer gebruiker</SectionTitle>\n              <p className=\"large\">Beheer gebruikersinformatie in onderstaand formulier. Als dit wordt aangepast, ontvangt de gebruiker een e-mail notificatie.</p>\n              <UserForm \n                handleSubmit={handleSubmit}\n                onSubmit={onSubmit}\n                register={register}\n                errors={errors}\n                user={user}\n                modalVisible={modalVisible}\n              />\n            </GridColTwoThirds>\n          </DefaultPage>\n\n          {/* screen modal for deleting account */}\n          <Modal \n            show={showModal}\n            handleClose={modalInvisible}\n            actionButton={true}\n            actionButtonText=\"Verwijder\"\n            actionButtonClassName=\"danger\"\n            actionButtonOnClick={() => deleteUser()}\n          >\n            <h2 style={{ margin: 0, marginBottom: 10 }}>Weet u zeker dat u uw account wilt verwijderen?</h2>\n            <p>U kunt hierna niet meer terug. Al uw gegevens worden verwijderd. Weet u dit zeker?</p>\n          </Modal>\n        </>\n      ) : (\n        <NotFound />\n      )\n    }\n  </>\n)\n\nconst SectionTitle = styled.h2`\n  border-bottom: 2px solid #eee;\n  margin-bottom: 30px;\n  padding-bottom: 10px;\n`\n\nconst ButtonGroup = styled.div`\n  margin-top: -10px;\n  a {\n    display: block;\n    margin-bottom: 5px;\n  }\n`\n\nconst SmallText = styled.div`\n  color: #999999;\n  font-size: 13px;\n  margin-top: 30px;\n  h3 {\n    color: #777;\n    font-size: 14px;\n    font-weight: 400;\n    line-height: 1.3;\n    padding-bottom: 5px;\n    border-bottom: 1px solid ${props => props.theme.darker_grey};\n  }\n  p {\n    line-height: 1.9;\n  }\n`\n\nexport default UserControlPage","import React, { useEffect, useState } from \"react\"\nimport _ from \"lodash\"\nimport { useLocation, useHistory } from \"react-router-dom\"\nimport FetchUser from \"components/users/fetchOne\"\nimport { trackPromise } from \"react-promise-tracker\"\nimport { useForm } from \"react-hook-form\"\n\nimport UserControlPage from \"components/pages/admin/userControlPage\"\n\nfunction ControlUser() {\n\n  const user = FetchUser()\n  const history = useHistory()\n  const location = useLocation()\n  const back = location.state ? location.state.from : null\n\n  const [showModal, setShowModal] = useState(false)\n  const [alert, setAlert] = useState({ visible: false, alert: null })\n  const { register, handleSubmit, errors } = useForm()\n  const onSubmit = data => {\n    setAlert({ visible: false, alert: null  })\n    \n    _.assign(user, data)\n    _.assign(user, { token: localStorage.getItem('jwt-token') })\n    const body = JSON.stringify(user)\n\n    trackPromise (\n      fetch(`${process.env.REACT_APP_API_BASEURL}/user/update.php`, {\n        method: 'POST', body: body\n      })\n        .then(async response => {\n          const data = await response.json()\n          // set alert\n          setAlert({ visible: true, alert: data.error ? data.error : data.success })\n        })\n        .catch((error) => console.log(error))\n    )\n  }\n\n  function updateAdmin() {\n    setAlert({ visible: false, alert: null  })\n    \n    _.assign(user, { admin: (user.admin == 0) ? 1 : 0, token: localStorage.getItem('jwt-token') });\n    const body = JSON.stringify(user)\n\n    trackPromise (\n      fetch(`${process.env.REACT_APP_API_BASEURL}/user/update.php`, { method: 'POST', body: body })\n        .then(async response => {\n          const data = await response.json()\n          setAlert({ visible: true, alert: data.error ? data.error : (user.admin == 1) ? 'Dit account is nu een administrator' : 'Dit account is niet meer een administrator' })\n        })\n        .catch((error) => console.error(error))\n    )\n  }\n\n  function updateStatus() {\n    setAlert({ visible: false, alert: null  })\n    \n    _.assign(user, { status: (user.status == 0) ? 1 : 0, token: localStorage.getItem('jwt-token'), change_status: 'true' });\n    const body = JSON.stringify(user)\n\n    trackPromise (\n      fetch(`${process.env.REACT_APP_API_BASEURL}/user/update.php`, { method: 'POST', body: body })\n        .then(async response => {\n          const data = await response.json()\n          setAlert({ visible: true, alert: data.error ? data.error : (user.status == 1) ? 'Dit account is nu goedgekeurd' : 'Dit account is niet meer goedgekeurd' })\n        })\n        .catch((error) => console.error(error))\n    )\n  }\n  \n  function deleteUser() {\n    _.assign(user, { token: localStorage.getItem('jwt-token') })\n    const body = JSON.stringify(user)\n\n    trackPromise (\n      fetch(`${process.env.REACT_APP_API_BASEURL}/user/delete.php`, { method: 'POST', body: body })\n        .then(async response => {\n          const data = await response.json()\n          setAlert({ visible: true, alert: data.error ? data.error : data.success })\n          setTimeout(() => {\n            history.push({\n              pathname: back ? back : '/admin'\n            })\n          }, 3000)\n        })\n        .catch((error) => console.error(error))\n    )\n  }\n\n  function modalVisible() {\n    setShowModal(true)\n  }\n\n  function modalInvisible() {\n    setShowModal(false)\n  }\n  \n  useEffect(() => {\n    if (location.state && location.state.alert) {\n      setAlert({\n        visible: true,\n        alert: location.state.alert\n      })\n    }\n  }, [location.state])\n\n  return <UserControlPage\n    user={user}\n    back={back}\n    alert={alert}\n    updateStatus={updateStatus}\n    updateAdmin={updateAdmin}\n    handleSubmit={handleSubmit}\n    onSubmit={onSubmit}\n    register={register}\n    errors={errors}\n    modalVisible={modalVisible}\n    modalInvisible={modalInvisible}\n    showModal={showModal}\n    deleteUser={deleteUser}\n  />\n\n}\n\nexport default ControlUser","import React from \"react\"\nimport styled from \"styled-components\"\nimport Navbar from \"./navbar\"\nimport Logo from \"images/logo.png\"\nimport { Link } from \"react-router-dom\"\n\nfunction NavbarSmall() {\n  return (\n    <Navbar center>\n      <MainLink to=\"/\">\n        <img src={Logo} alt=\"notenboom-logo\" /> \n      </MainLink>\n    </Navbar>\n  )\n}\n\nconst MainLink = styled(Link)`\n  outline: none;\n  text-decoration: none;\n  display: block;\n  img {\n    display: block;\n    margin: 0;\n    height: auto;\n    image-rendering: optimizeQuality;\n  }\n`\n\nexport default NavbarSmall"],"sourceRoot":""}