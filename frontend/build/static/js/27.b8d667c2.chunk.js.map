{"version":3,"sources":["components/pages/account/signupForm.js","pages/account/signup.js"],"names":["SignupForm","alert","handleSubmit","onSubmit","register","errors","password","title","subtitle","visible","text","method","htmlFor","type","id","name","tabIndex","className","email","ref","required","pattern","value","message","username","minLength","maxLength","passwordr","validate","current","Signup","history","useHistory","React","useRef","useState","setAlert","useForm","watch","useEffect","document","data","trackPromise","fetch","process","body","JSON","stringify","then","response","a","json","error","success","push","pathname","state","catch","console"],"mappings":"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","file":"static/js/27.b8d667c2.chunk.js","sourcesContent":["import React from \"react\"\nimport AuthPage from \"components/pages/account/authPage\"\nimport {\n  FormPageForm,\n  FormGroup,\n  FormLabel,\n  FormControl,\n  FormControlError,\n  FormSubmit\n} from \"components/elements/forms\"\nimport Alert from \"components/elements/alert\"\n\nconst SignupForm = ({ alert, handleSubmit, onSubmit, register, errors, password }) => (\n  <AuthPage\n    title = \"Vraag een account aan\"\n    subtitle = \"Vraag een account aan bij Notenboom om te kunnen helpen fouten weg te werken uit lesboeken.\"\n  >\n    <Alert visible={alert.visible} text={alert.alert} />\n    \n    <FormPageForm onSubmit={handleSubmit(onSubmit)} method=\"POST\">\n      <FormGroup>\n        <FormLabel htmlFor=\"email\">Vul uw e-mailadres in</FormLabel>\n        <FormControl type=\"email\" id=\"email\" name=\"email\" tabIndex=\"1\" className={errors.email && \"error\"} ref={register({\n          required: \"Dit veld is verplicht!\",\n          pattern: {\n            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n            message: \"Ongeldig e-mailadres, probeer een andere!\"\n          }\n        })} />\n        {errors.email && <FormControlError>{errors.email.message}</FormControlError>}\n      </FormGroup>\n      <FormGroup>\n        <FormLabel htmlFor=\"username\">Maak een gebruikersnaam aan</FormLabel>\n        <FormControl type=\"username\" id=\"username\" name=\"username\" tabIndex=\"2\" className={errors.username && \"error\"} ref={register({\n          required: \"Dit veld is verplicht!\",\n          minLength: {\n            value: 3,\n            message: \"Gebruikersnaam moet bestaan uit minimaal 3 tekens!\"\n          },\n          maxLength: {\n            value: 20,\n            message: \"Gebruikersnaam moet bestaan uit maximaal 20 tekens!\"\n          }\n        })} />\n        {errors.username && <FormControlError>{errors.username.message}</FormControlError>}\n      </FormGroup>\n      <FormGroup>\n        <FormLabel htmlFor=\"name\">Vul uw volledige naam in</FormLabel>\n        <FormControl type=\"name\" id=\"name\" name=\"name\" tabIndex=\"3\" ref={register({ required: \"Dit veld is verplicht!\" })} className={errors.name && \"error\"} />\n        {errors.name && <FormControlError>{errors.name.message}</FormControlError>}\n      </FormGroup>\n      <FormGroup>\n        <FormLabel htmlFor=\"password\">Maak een wachtwoord aan</FormLabel>\n        <FormControl type=\"password\" id=\"password\" name=\"password\" tabIndex=\"4\" className={errors.password && \"error\"} ref={register({\n          required: \"Dit veld is verplicht!\",\n          minLength: {\n            value: 8,\n            message: \"Wachtwoord moet bestaan uit minimaal 8 tekens!\"\n          }\n        })} />\n        {errors.password && <FormControlError>{errors.password.message}</FormControlError>}\n      </FormGroup>\n      <FormGroup>\n        <FormLabel htmlFor=\"passwordr\">Herhaal uw wachtwoord</FormLabel>\n        <FormControl type=\"password\" id=\"passwordr\" name=\"passwordr\" tabIndex=\"5\" className={errors.passwordr && \"error\"} ref={register({\n          validate: value =>\n            value === password.current || \"Wachtwoorden zijn niet gelijk!\"\n        })} />\n        {errors.passwordr && <FormControlError>{errors.passwordr.message}</FormControlError>}\n      </FormGroup>\n      <FormSubmit type=\"submit\" value=\"Meld aan\" tabIndex=\"6\" className=\"button\" />\n    </FormPageForm>\n  </AuthPage>\n)\n\nexport default SignupForm","import React, { useEffect, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { trackPromise } from \"react-promise-tracker\"\nimport { useForm } from \"react-hook-form\"\nimport SignupForm from \"components/pages/account/signupForm\"\n\nfunction Signup() {\n  // set constants and state from hooks\n  const history = useHistory()\n  const password = React.useRef({})\n  const [alert, setAlert] = useState(false, null)\n  const { register, handleSubmit, watch, errors } = useForm()\n\n  // watch password\n  password.current = watch(\"password\", \"\")\n  \n  // set page title\n  useEffect(() => document.title = 'Aanmelden - Notenboom')\n\n  // form submit function\n  const onSubmit = data => {\n    trackPromise (\n      fetch(`${process.env.REACT_APP_API_BASEURL}/user/create.php`, {\n        method: 'POST',\n        body: JSON.stringify(data)\n      })\n        .then(async response => {\n          const data = await response.json()\n          \n          if (data.error) {\n            // signup error, set alert\n            setAlert({ visible: true, alert: data.error })\n          }\n          if (data.success) {\n            // signup success, redirect to login page and show alert\n            history.push({ \n              pathname: '/account/inloggen', \n              state: {alert: data.success} \n            })\n          }\n        })\n        .catch((error) => console.error(error))\n    )\n  }\n\n  // return signup page (in componets folder)\n  return (\n    <SignupForm \n      alert={alert}\n      handleSubmit={handleSubmit}\n      onSubmit={onSubmit}\n      register={register}\n      errors={errors}\n      password={password}\n    />\n  )\n}\n\nexport default Signup"],"sourceRoot":""}