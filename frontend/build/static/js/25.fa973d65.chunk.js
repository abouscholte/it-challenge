(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[25],{1422:function(e,t,r){"use strict";r.r(t);var n=r(34),o=r.n(n),a=r(84),s=r(74),i=r(0),c=r(3),l=r(88),u=r(99);function d(e){this.message=e}d.prototype=new Error,d.prototype.name="InvalidCharacterError";var b="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new d("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,a=0,s="";n=t.charAt(a++);~n&&(r=o%4?64*r+n:n,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function h(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(b(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return b(t)}}function p(e){this.message=e}p.prototype=new Error,p.prototype.name="InvalidTokenError";var m=function(e,t){if("string"!=typeof e)throw new p("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(h(e.split(".")[r]))}catch(e){throw new p("Invalid token specified: "+e.message)}},f=r(22),j=r(106),g=r(87),w=r(83),v=r(2),O=function(e){var t=e.alert,r=e.onSubmit,n=e.handleSubmit,o=e.register,a=e.errors;return Object(v.jsxs)(j.a,{title:"Log in bij Notenboom",subtitle:"Log in met je account om fouten in lesboeken te kunnen rapporteren binnen het Notenboom systeem.",formInfo:"signup",children:[Object(v.jsx)(w.a,{visible:t.visible,text:t.alert}),Object(v.jsxs)(g.g,{onSubmit:n(r),method:"POST",children:[Object(v.jsxs)(g.c,{children:[Object(v.jsx)(g.e,{htmlFor:"useremail",children:"Vul uw e-mailadres of gebruikersnaam in"}),Object(v.jsx)(g.a,{type:"text",id:"useremail",name:"useremail",tabIndex:"1",ref:o({required:"Dit veld is verplicht!"}),className:a.useremail&&"error"}),a.useremail&&Object(v.jsx)(g.b,{children:a.useremail.message})]}),Object(v.jsxs)(g.c,{children:[Object(v.jsx)(g.e,{htmlFor:"password",children:"Vul uw wachtwoord in"}),Object(v.jsx)(g.a,{type:"password",id:"password",name:"password",tabIndex:"2",ref:o({required:"Dit veld is verplicht!"}),className:a.password&&"error"}),a.password&&Object(v.jsx)(g.b,{children:a.password.message})]}),Object(v.jsx)(g.i,{type:"submit",value:"Log in",className:"button",tabIndex:"3"}),Object(v.jsx)(g.f,{children:Object(v.jsx)(f.b,{to:"/account/wachtwoord-vergeten",children:"Wachtwoord vergeten?"})})]})]})};t.default=function(){var e=Object(c.g)(),t=Object(c.h)(),r=Object(u.a)(),n=r.register,d=r.handleSubmit,b=r.errors,h=Object(i.useState)({visible:!!t.state,alert:t.state?t.state.alert:null}),p=Object(s.a)(h,2),f=p[0],j=p[1];return Object(i.useEffect)((function(){return document.title="Inloggen - Notenboom"})),Object(v.jsx)(O,{alert:f,handleSubmit:d,onSubmit:function(t){Object(l.trackPromise)(fetch("".concat("https://informaticaserver.nl/notenboom_project/api","/user/login.php"),{method:"POST",body:JSON.stringify(t)}).then(function(){var t=Object(a.a)(o.a.mark((function t(r){var n,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:(n=t.sent).error?j({visible:!0,alert:n.error}):n.success&&(a=n.token,s=m(a),localStorage.setItem("currentUser",JSON.stringify(s)),localStorage.setItem("jwt-token",a),e.push({pathname:"/fouten",state:{alert:n.success}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.error(e)})))},register:n,errors:b})}}}]);
//# sourceMappingURL=25.fa973d65.chunk.js.map