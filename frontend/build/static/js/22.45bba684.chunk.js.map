{"version":3,"sources":["components/pages/account/accountIndex.js","pages/account/index.js","components/layout/sidebarPage.js"],"names":["AccountIndex","props","title","sidebarTitle","sidebarType","visible","alert","text","className","user","admin","id","style","margin","fontSize","to","marginBottom","handleSubmit","onSubmit","register","errors","modalVisible","show","showModal","handleClose","modalInvisible","actionButton","actionButtonText","actionButtonClassName","actionButtonOnClick","deleteUser","Account","history","useHistory","location","useLocation","useState","setShowModal","state","setAlert","email","username","password","name","setUser","useForm","useEffect","document","userdata","localStorage","getItem","userid","JSON","parse","uid","token","fetchUserBody","stringify","a","trackPromise","fetch","process","method","body","then","response","json","data","catch","error","console","fetchData","_","assign","success","setTimeout","push","pathname","Container","styled","section","Sidebar","nav","StickyWrapper","div","NavTitle","h3","theme","outline","List","ul","SidebarLink","NavLink","primary_blue","Right","SidebarPage","children","navOpen","setNavOpen","links","Fragment","full","onClick","tabIndex","map","item","key","exact"],"mappings":"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","file":"static/js/22.45bba684.chunk.js","sourcesContent":["import React from \"react\"\nimport { Link } from \"react-router-dom\"\nimport NavbarLarge from \"components/layout/navbar/navbarLarge\"\nimport Page from \"components/layout/sidebarPage\"\nimport UserForm from \"components/users/userForm\"\nimport Alert from \"components/elements/alert\"\nimport Modal from \"components/elements/modal\"\n\nconst AccountIndex = props => (\n  <>\n    {/* navbar and page wrapper */}\n    <NavbarLarge />\n    <Page title=\"Uw account\" sidebarTitle=\"Beheer uw account\" sidebarType=\"account\">\n\n      <Alert visible={props.alert.visible} text={props.alert.alert} />\n      <h1>Uw persoonlijk Notenboom account.</h1>\n      <p className=\"large\">Beheer hier uw persoonlijke Notenboom account. U kunt uw informatie (e-mailadres, gebruikersnaam en naam) veranderen en uw wachtwoord aanpassen. Ook kunt u er voor kiezen uw account permanent te verwijderen.</p>\n\n      {/* admin things */}\n      {props.user.admin === '1' && (\n        <div id=\"admin\">\n          <h2 style={{ margin: '50px 0 10px 0', fontSize: '1.7rem' }}>Administrator</h2>\n          <p>U bent een administrator. Hierdoor heeft u bevoegdheid om gebruikers te bekijken en beheren en suggesties voor aanpassingen in lesboeken te accepteren. Gebruik de knop hieronder om naar het administrator paneel te gaan.</p>\n          <Link className=\"button\" to=\"/admin\" style={{ marginBottom: '50px', fontSize: 14 }}> Ga naar administrator paneel</Link>\n        </div>\n      )}\n\n      {/* form for users */}\n      {props.user && (\n        <UserForm \n          handleSubmit={props.handleSubmit} \n          onSubmit={props.onSubmit} \n          user={props.user} \n          register={props.register} \n          errors={props.errors} \n          modalVisible={props.modalVisible} />\n      )}\n    </Page>\n\n    {/* modal for account deletion */}\n    <Modal \n      show={props.showModal}\n      handleClose={props.modalInvisible}\n      actionButton={true}\n      actionButtonText=\"Verwijder\"\n      actionButtonClassName=\"danger\"\n      actionButtonOnClick={() => props.deleteUser()}\n    >\n      <h2 style={{ margin: 0, marginBottom: 10 }}>Weet u zeker dat u uw account wilt verwijderen?</h2>\n      <p>U kunt hierna niet meer terug. Al uw gegevens worden verwijderd. Weet u dit zeker?</p>\n    </Modal>\n  </>\n)\n\nexport default AccountIndex","import React, { useEffect, useState } from \"react\"\nimport _ from \"lodash\"\nimport { useLocation, useHistory } from \"react-router-dom\"\nimport { useForm } from \"react-hook-form\"\nimport { trackPromise } from \"react-promise-tracker\"\n\nimport AccountIndex from \"components/pages/account/accountIndex\"\n\nfunction Account() {\n\n  // set states and variables\n  const history = useHistory()\n  const location = useLocation()\n  const [showModal, setShowModal] = useState(false)\n  const [alert, setAlert] = useState({ visible: (location.state ? true : false), alert: (location.state ? location.state.alert : null) })\n  const [user, setUser] = useState({\n    id: null,\n    email: null,\n    username: null,\n    password: null,\n    name: null,\n    admin: null\n  })\n  const { register, handleSubmit, errors } = useForm()\n  \n  useEffect(() => {\n    // set document title\n    document.title = 'Uw account - Notenboom'\n\n    // fetch token and set body for user fetch\n    const userdata = localStorage.getItem('currentUser')\n    const userid = JSON.parse(userdata).uid\n    const token = localStorage.getItem('jwt-token')\n    const fetchUserBody = JSON.stringify({ token: token, id: userid })\n    \n    // fetch user data\n    async function fetchData() {\n      trackPromise (\n        fetch(`${process.env.REACT_APP_API_BASEURL}/user/fetch_one.php`, {\n          method: 'POST', body: fetchUserBody\n        })\n          .then(async response => {\n            const data = await response.json()\n            setUser(data)\n          })\n          .catch((error) => console.error(error))\n      )\n    }\n\n    fetchData()\n  }, [])\n\n  // update account form submit\n  const onSubmit = data => {\n    setAlert({ visible: false, alert: null  })\n    \n    _.assign(user, data)\n    _.assign(user, { token: localStorage.getItem('jwt-token') })\n    const body = JSON.stringify(user)\n\n    trackPromise (\n      fetch(`${process.env.REACT_APP_API_BASEURL}/user/update.php`, {\n        method: 'POST', body: body\n      })\n        .then(async response => {\n          const fetchData = await response.json()\n          // set error or success message\n          setAlert({ visible: true, alert: fetchData.error ? fetchData.error : fetchData.success })\n        })\n        .catch((error) => console.error(error))\n    )\n  }\n\n  function deleteUser() {\n    _.assign(user, { token: localStorage.getItem('jwt-token') })\n    const body = JSON.stringify(user)\n\n    trackPromise (\n      fetch(`${process.env.REACT_APP_API_BASEURL}/user/delete.php`, { method: 'POST', body: body })\n        .then(async response => {\n          const data = await response.json()\n          setAlert({ visible: true, alert: data.error ? data.error : data.success })\n          setTimeout(() => {\n            history.push({\n              pathname: '/account/uitloggen'\n            })\n          }, 3000)\n        })\n        .catch((error) => console.error(error))\n    )\n  }\n\n  // functions for opening and closing modals\n  function modalVisible() {\n    setShowModal(true)\n  }\n\n  function modalInvisible() {\n    setShowModal(false)\n  }\n  \n  // return account page (in components folder)\n  return <AccountIndex\n    alert={alert}\n    user={user}\n    handleSubmit={handleSubmit}\n    onSubmit={onSubmit}\n    register={register}\n    errors={errors}\n    modalVisible={modalVisible}\n    modalInvisible={modalInvisible}\n    showModal={showModal}\n    deleteUser={deleteUser}\n  />\n}\n\nexport default Account","import React, { useState } from \"react\"\nimport styled from \"styled-components\"\nimport Page from \"components/layout/defaultPage\"\nimport { NavLink } from \"react-router-dom\"\nimport { ChevronDownOutline } from \"react-ionicons\"\n\nconst SidebarPage = ({ children, title, sidebarTitle, sidebarType }) => {\n\n  // set sidebar links\n  const accountLinks = [\n    {title: 'Uw account', to: '/account'},\n    {title: 'Uw aanpassingen', to: '/account/aanpassingen'},\n    {title: 'Uw boeken', to: '/account/boeken'}\n  ]\n  \n  const adminLinks = [\n    {title: 'Gebruikers', to: '/admin'},\n    {title: 'Foutenrapportages', to: '/admin/fouten'},\n    {title: 'Boeken', to: '/admin/boeken'}\n  ]\n  \n  // set state variables\n  const [navOpen, setNavOpen] = useState(false)\n  const [links] = useState(sidebarType == 'account' ? accountLinks : adminLinks)\n  \n  return (\n    <React.Fragment>\n      {/* render navbar and default page layout */}\n      <Page title={title} full>\n        <Container>\n          {/* render sidebar with sticky wrapper inside */}\n          <Sidebar>\n            <StickyWrapper>\n              <NavTitle>{sidebarTitle}\n                <span id=\"nav-open-button\" className={navOpen ? 'nav-open' : ''} onClick={() => setNavOpen(navOpen == false ? true : false)} tabIndex=\"1\">\n                  <ChevronDownOutline />\n                </span>\n              </NavTitle>\n              <List className={navOpen ? 'nav-open' : ''}>\n                {links.map((item, key) => (\n                  <li key={key}>\n                    <SidebarLink exact to={item.to}>{item.title}</SidebarLink>\n                  </li>\n                ))}\n              </List>\n            </StickyWrapper>\n          </Sidebar>\n\n          {/* render children in right section */}\n          <Right>\n            {children}\n          </Right>\n        </Container>\n      </Page>\n    </React.Fragment>\n  )\n}\n\nconst Container = styled.section`\n  position: relative;\n  display: flex;\n  flex-wrap: nowrap;\n  max-width: 1000px;\n  margin: 0 auto;\n  @media screen and (max-width: 750px) {\n    display: block;\n  }\n`\n\nconst Sidebar = styled.nav`\n  position: relative;\n  z-index: 900;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  display: flex;\n  min-width: 250px;\n  max-width: 33%;\n  flex-direction: column;\n  border-right: 1px solid #ddd;\n  margin-right: 30px;\n  padding: 50px 50px 50px 20px;\n\n  @media screen and (max-width: 750px) {\n    max-width: 100%;\n    position: sticky;\n    z-index: 500;\n    top: 0;\n    padding: 30px 20px 5px 20px;\n    margin: 0;\n    border-right: none;\n    border-bottom: 1px solid #ddd;\n    background: white;\n  }\n`\n\nconst StickyWrapper = styled.div`\n  position: sticky;\n  top: 30px;\n  @media screen and (max-width: 750px) {\n    position: static;\n  }\n`\n\nconst NavTitle = styled.h3`\n  font-size: 1.8rem;\n  margin: 0 0 40px;\n\n  #nav-open-button {\n    margin-left: 10px;\n    cursor: pointer;\n    display: none;\n    width: 32px;\n    justify-content: center;\n    align-items: center;\n    outline: none;\n    transition: box-shadow .2s ease;\n    border-radius: .5rem;\n    svg {\n      margin-bottom: -3px;\n      transition: all .3s ease;\n      transform: rotateX(0);\n    }\n    &:hover svg,\n    &:focus svg {\n      color: #666;\n    }\n    &:focus {\n      box-shadow: 0 0 0 3px ${props => props.theme.outline};\n    }\n    &.nav-open svg {\n      transform: rotateX(180deg);\n    }\n  }\n  \n  @media screen and (max-width: 750px) {\n    font-size: 1.5rem;\n    display: flex;\n    #nav-open-button {\n      display: flex;\n    }\n  }\n`\n\nconst List = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  li {\n    margin-bottom: 15px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  @media screen and (max-width: 750px) {\n    max-height: 0;\n    overflow: hidden;\n    margin-top: -20px;\n    transition: max-height 300ms ease;\n\n    &.nav-open {\n      max-height: 100px;\n    }\n    \n    li {\n      margin-bottom: 10px;\n      &:last-child {\n        margin-bottom: 30px;\n      }\n    }\n  }\n`\n\nconst SidebarLink = styled(NavLink)`\n  font-weight: 400;\n  font-size: 18px;\n  color: #333;\n  &.active {\n    font-weight: 700;\n    color: ${props => props.theme.primary_blue};\n  }\n  @media screen and (max-width: 750px) {\n    font-size: 1rem;\n  }\n`\n\nconst Right = styled.section`\n  width: 100%;\n  max-width: 67%;\n  margin: 50px auto;\n  padding: 0 40px;\n\n  @media screen and (max-width: 750px) {\n    max-width: 100%;\n    padding: 0 20px;\n    margin: 20px auto 50px auto;\n  }\n`\n\nexport default SidebarPage"],"sourceRoot":""}